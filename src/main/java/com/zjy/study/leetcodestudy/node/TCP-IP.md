TCP/IP协议

应用协议：HTTP,SMTP,FTP,TELNET,SNMP
传输协议：TCP,UDP
路由控制协议：RIP,OSPF,BGP
网际协议：IP/ICMP/ARP

三次握手,四次挥手：实质是TCP通信的连接和断开
三次握手：
一、服务端新建套接字,绑定地址信息后开始监听,进入LISTEN状态。
客户端新建套接字绑定地址信息后调用connect,发送连接请求SYN,并进入SYN_SENT状态,等待服务器的确认
二、 服务端一旦监听到连接请求，就会将连接放入内核等待队列中，并向客户端发送SYN和确认报文段ACK，进入SYN_RECD状态
三、 客户端收到SYN+ACK报文后向服务端发送确认报文段ACK，并进入ESTABLISHED状态，开始读写数据。
服务端一旦收到客户端的确认报文，就进入ESTABLISHED状态，就可以进行读写数据了

四次挥手：
一、客户端主动调用close时,向服务端发送结束报文段FIN报,同时进入FIN_WAIT1状态
二、服务端会收到结束报文段FIN报,服务器返回确认报文段ACK并进入CLOSE_WAIT状态,此时如果服务端有数据要发送的话, 客户端依然需要接收。
客户端收到服务器对结束报文段的确认,就会进入到FIN_WAIT2状态,开始等待服务器的结束报文段
三、服务端数据发送完毕后,当服务器真正调用close关闭连接时,会向客户端发送结束报文段FIN包,此时服务器进入LAST_ACK状态,等待最后一个ACK的带来
四、客户端收到服务器发来的结束报文段,进入TIME_WAIT,并发送确认报文段ACK;
服务器收到结束报文段确认的ACK,进入CLOSED状态,断开连接,
客户端要等待2MSL(报文在网络中最大生存时间)的时间，进入到CLOSED状态

为什么握手是三次,不是两次或四次？：
两次不安全,四次没必要。
第一次客户端发送SYN,服务端接收,服务端得出客户端的发送能力和服务端的接收能力都正常
第二次服务端发送SYN+ACK,客户端接收,客户端得出客户端的发送接收能力和服务端的发送接收能力都正常,服务端并不能确认客户端的接收能力是否正常
第三次客户端发送ACK,服务端得出客户端发送接收能力正常,服务端发送接收能力正常

三次握手可以携带数据吗？：
第一次,第二次不能,第三次可以。


为什么TIME_WAIT状态经过2MSL才能进入CLOSED状态？：
在客户端发送FIN确认包ACK后,这个ACK包有可能到达不了,服务端如果接收不到ACK包就会重新发送FIN包